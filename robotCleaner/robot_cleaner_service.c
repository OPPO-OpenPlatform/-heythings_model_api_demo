/* Generated by the heythings model compiler.  DO NOT EDIT! */
/* Generated from: robotCleaner.proto */

#include <errno.h>
#include <assert.h>
#include "robotCleaner.pb-c.h"
#include "robot_cleaner_service.h"
#include "hey/schema.h"

#define ROBOT_CLEANER_SERVICE (23 * 256)
#define PROP_IID_CNT 30
#define ACT_IID_CNT 13
#define EV_IID_CNT 7

static const struct hey_schema_property robot_cleaner_properties_iids[] = {
    [0] = { .iid = 1, .type = HEY_PROPERTY_TYPE_GENERIC },
    [1] = { .iid = 2, .type = HEY_PROPERTY_TYPE_GENERIC },
    [2] = { .iid = 3, .type = HEY_PROPERTY_TYPE_GENERIC },
    [3] = { .iid = 4, .type = HEY_PROPERTY_TYPE_GENERIC },
    [4] = { .iid = 5, .type = HEY_PROPERTY_TYPE_GENERIC },
    [5] = { .iid = 6, .type = HEY_PROPERTY_TYPE_GENERIC },
    [6] = { .iid = 11, .type = HEY_PROPERTY_TYPE_GENERIC },
    [7] = { .iid = 12, .type = HEY_PROPERTY_TYPE_GENERIC },
    [8] = { .iid = 13, .type = HEY_PROPERTY_TYPE_GENERIC },
    [9] = { .iid = 14, .type = HEY_PROPERTY_TYPE_GENERIC },
    [10] = { .iid = 15, .type = HEY_PROPERTY_TYPE_GENERIC },
    [11] = { .iid = 16, .type = HEY_PROPERTY_TYPE_GENERIC },
    [12] = { .iid = 17, .type = HEY_PROPERTY_TYPE_GENERIC },
    [13] = { .iid = 18, .type = HEY_PROPERTY_TYPE_GENERIC },
    [14] = { .iid = 19, .type = HEY_PROPERTY_TYPE_GENERIC },
    [15] = { .iid = 20, .type = HEY_PROPERTY_TYPE_GENERIC },
    [16] = { .iid = 21, .type = HEY_PROPERTY_TYPE_GENERIC },
    [17] = { .iid = 22, .type = HEY_PROPERTY_TYPE_GENERIC },
    [18] = { .iid = 23, .type = HEY_PROPERTY_TYPE_GENERIC },
    [19] = { .iid = 24, .type = HEY_PROPERTY_TYPE_GENERIC },
    [20] = { .iid = 25, .type = HEY_PROPERTY_TYPE_GENERIC },
    [21] = { .iid = 36, .type = HEY_PROPERTY_TYPE_GENERIC },
    [22] = { .iid = 37, .type = HEY_PROPERTY_TYPE_GENERIC },
    [23] = { .iid = 38, .type = HEY_PROPERTY_TYPE_GENERIC },
    [24] = { .iid = 40, .type = HEY_PROPERTY_TYPE_ARRAY },
    [25] = { .iid = 42, .type = HEY_PROPERTY_TYPE_ARRAY },
    [26] = { .iid = 47, .type = HEY_PROPERTY_TYPE_ARRAY },
    [27] = { .iid = 48, .type = HEY_PROPERTY_TYPE_GENERIC },
    [28] = { .iid = 50, .type = HEY_PROPERTY_TYPE_GENERIC },
    [29] = { .iid = 51, .type = HEY_PROPERTY_TYPE_GENERIC },
};
static const uint32_t robot_cleaner_event_iids[] = { 30, 31, 32, 33, 34, 35, 49 };
static struct hey_service *robot_cleaner_service;

static int32_t action_sound_alarm_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInSoundAlarm *sound_alarm = iot__service__robot_cleaner__action_in_sound_alarm__unpack(NULL, len, value);
    if (NULL == sound_alarm) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_sound_alarm_in action = { 0 };
    ret = robot_cleaner_sound_alarm_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_sound_alarm__free_unpacked(sound_alarm, NULL);
    return ret;
}

static void action_sound_alarm_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_sound_alarm_stop_cb(user_context);
}

/**
 * @brief sound alarm action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [sound alarm action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_sound_alarm_send(struct hey_action_ctx *ctx, struct robot_cleaner_sound_alarm_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief sound alarm action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_sound_alarm_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_robot_homing_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInRobotHoming *robot_homing = iot__service__robot_cleaner__action_in_robot_homing__unpack(NULL, len, value);
    if (NULL == robot_homing) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_robot_homing_in action = { 0 };
    ret = robot_cleaner_robot_homing_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_robot_homing__free_unpacked(robot_homing, NULL);
    return ret;
}

static void action_robot_homing_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_robot_homing_stop_cb(user_context);
}

/**
 * @brief robot homing action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [robot homing action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_robot_homing_send(struct hey_action_ctx *ctx, struct robot_cleaner_robot_homing_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief robot homing action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_robot_homing_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_stop_homing_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInStopHoming *stop_homing = iot__service__robot_cleaner__action_in_stop_homing__unpack(NULL, len, value);
    if (NULL == stop_homing) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_stop_homing_in action = { 0 };
    ret = robot_cleaner_stop_homing_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_stop_homing__free_unpacked(stop_homing, NULL);
    return ret;
}

static void action_stop_homing_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_stop_homing_stop_cb(user_context);
}

/**
 * @brief stop homing action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [stop homing action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_stop_homing_send(struct hey_action_ctx *ctx, struct robot_cleaner_stop_homing_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief stop homing action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_stop_homing_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_motion_control_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInMotionControl *motion_control = iot__service__robot_cleaner__action_in_motion_control__unpack(NULL, len, value);
    if (NULL == motion_control) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_motion_control_in action = { 0 };
    action.motiondirection = motion_control->motiondirection;
    ret = robot_cleaner_motion_control_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_motion_control__free_unpacked(motion_control, NULL);
    return ret;
}

static void action_motion_control_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_motion_control_stop_cb(user_context);
}

/**
 * @brief motion control action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [motion control action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_motion_control_send(struct hey_action_ctx *ctx, struct robot_cleaner_motion_control_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief motion control action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_motion_control_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_side_brush_reset_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInSideBrushReset *side_brush_reset = iot__service__robot_cleaner__action_in_side_brush_reset__unpack(NULL, len, value);
    if (NULL == side_brush_reset) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_side_brush_reset_in action = { 0 };
    ret = robot_cleaner_side_brush_reset_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_side_brush_reset__free_unpacked(side_brush_reset, NULL);
    return ret;
}

static void action_side_brush_reset_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_side_brush_reset_stop_cb(user_context);
}

/**
 * @brief side brush reset action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [side brush reset action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_side_brush_reset_send(struct hey_action_ctx *ctx, struct robot_cleaner_side_brush_reset_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief side brush reset action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_side_brush_reset_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_roll_brush_reset_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInRollBrushReset *roll_brush_reset = iot__service__robot_cleaner__action_in_roll_brush_reset__unpack(NULL, len, value);
    if (NULL == roll_brush_reset) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_roll_brush_reset_in action = { 0 };
    ret = robot_cleaner_roll_brush_reset_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_roll_brush_reset__free_unpacked(roll_brush_reset, NULL);
    return ret;
}

static void action_roll_brush_reset_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_roll_brush_reset_stop_cb(user_context);
}

/**
 * @brief roll brush reset action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [roll brush reset action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_roll_brush_reset_send(struct hey_action_ctx *ctx, struct robot_cleaner_roll_brush_reset_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief roll brush reset action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_roll_brush_reset_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_hepa_reset_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInHepaReset *hepa_reset = iot__service__robot_cleaner__action_in_hepa_reset__unpack(NULL, len, value);
    if (NULL == hepa_reset) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_hepa_reset_in action = { 0 };
    ret = robot_cleaner_hepa_reset_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_hepa_reset__free_unpacked(hepa_reset, NULL);
    return ret;
}

static void action_hepa_reset_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_hepa_reset_stop_cb(user_context);
}

/**
 * @brief hepa reset action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [hepa reset action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_hepa_reset_send(struct hey_action_ctx *ctx, struct robot_cleaner_hepa_reset_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief hepa reset action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_hepa_reset_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_filter_reset_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInFilterReset *filter_reset = iot__service__robot_cleaner__action_in_filter_reset__unpack(NULL, len, value);
    if (NULL == filter_reset) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_filter_reset_in action = { 0 };
    ret = robot_cleaner_filter_reset_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_filter_reset__free_unpacked(filter_reset, NULL);
    return ret;
}

static void action_filter_reset_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_filter_reset_stop_cb(user_context);
}

/**
 * @brief filter reset action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [filter reset action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_filter_reset_send(struct hey_action_ctx *ctx, struct robot_cleaner_filter_reset_out *action)
{
    return hey_action_msg_send(ctx, 0, NULL);
}

/**
 * @brief filter reset action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_filter_reset_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_rectangle_clean_zone_seting_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInRectangleCleanZoneSeting *rectangle_clean_zone_seting = iot__service__robot_cleaner__action_in_rectangle_clean_zone_seting__unpack(NULL, len, value);
    if (NULL == rectangle_clean_zone_seting) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_rectangle_clean_zone_seting_in action = { 0 };
    action.n_zone = rectangle_clean_zone_seting->n_zone;
    if (action.n_zone) {
        action.zone = calloc(action.n_zone, sizeof(struct robot_cleaner_rectangle*));
        if (action.zone == NULL) {
            goto out;
        }
    }
    for (int i = 0; i < action.n_zone; i++) {
        action.zone[i] = malloc(sizeof(struct robot_cleaner_rectangle));
        if (action.zone[i] == NULL) {
            goto out;
        }
        action.zone[i]->x0 = rectangle_clean_zone_seting->zone[i]->x0;
        action.zone[i]->y0 = rectangle_clean_zone_seting->zone[i]->y0;
        action.zone[i]->x1 = rectangle_clean_zone_seting->zone[i]->x1;
        action.zone[i]->y1 = rectangle_clean_zone_seting->zone[i]->y1;
    }
    ret = robot_cleaner_rectangle_clean_zone_seting_start_cb(ctx, &action, user_context);

out:
    for (int i = 0; i < action.n_zone; i++) {
        if (action.zone[i] == NULL)
            break;
        free(action.zone[i]);
    }
    free(action.zone);
    iot__service__robot_cleaner__action_in_rectangle_clean_zone_seting__free_unpacked(rectangle_clean_zone_seting, NULL);
    return ret;
}

static void action_rectangle_clean_zone_seting_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_rectangle_clean_zone_seting_stop_cb(user_context);
}

/**
 * @brief rectangle clean zone seting action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [rectangle clean zone seting action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_rectangle_clean_zone_seting_send(struct hey_action_ctx *ctx, struct robot_cleaner_rectangle_clean_zone_seting_out *action)
{
    int32_t ret = 0;
    Iot__Service__RobotCleaner__ActionOutRectangleCleanZoneSeting *out = NULL;
    uint8_t *buf = NULL;
    out = malloc(sizeof(Iot__Service__RobotCleaner__ActionOutRectangleCleanZoneSeting));
    if (NULL == out) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__action_out_rectangle_clean_zone_seting__init(out);
    out->code = action->code;
    size_t buf_len = iot__service__robot_cleaner__action_out_rectangle_clean_zone_seting__get_packed_size(out);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
    }
    iot__service__robot_cleaner__action_out_rectangle_clean_zone_seting__pack(out, buf);
    ret = hey_action_msg_send(ctx, buf_len, buf);

out:
    free(out);
    free(buf);
    return ret;
}

/**
 * @brief rectangle clean zone seting action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_rectangle_clean_zone_seting_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_rectangle_forbidden_zone_seting_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInRectangleForbiddenZoneSeting *rectangle_forbidden_zone_seting = iot__service__robot_cleaner__action_in_rectangle_forbidden_zone_seting__unpack(NULL, len, value);
    if (NULL == rectangle_forbidden_zone_seting) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_rectangle_forbidden_zone_seting_in action = { 0 };
    action.n_zone = rectangle_forbidden_zone_seting->n_zone;
    if (action.n_zone) {
        action.zone = calloc(action.n_zone, sizeof(struct robot_cleaner_rectangle*));
        if (action.zone == NULL) {
            goto out;
        }
    }
    for (int i = 0; i < action.n_zone; i++) {
        action.zone[i] = malloc(sizeof(struct robot_cleaner_rectangle));
        if (action.zone[i] == NULL) {
            goto out;
        }
        action.zone[i]->x0 = rectangle_forbidden_zone_seting->zone[i]->x0;
        action.zone[i]->y0 = rectangle_forbidden_zone_seting->zone[i]->y0;
        action.zone[i]->x1 = rectangle_forbidden_zone_seting->zone[i]->x1;
        action.zone[i]->y1 = rectangle_forbidden_zone_seting->zone[i]->y1;
    }
    ret = robot_cleaner_rectangle_forbidden_zone_seting_start_cb(ctx, &action, user_context);

out:
    for (int i = 0; i < action.n_zone; i++) {
        if (action.zone[i] == NULL)
            break;
        free(action.zone[i]);
    }
    free(action.zone);
    iot__service__robot_cleaner__action_in_rectangle_forbidden_zone_seting__free_unpacked(rectangle_forbidden_zone_seting, NULL);
    return ret;
}

static void action_rectangle_forbidden_zone_seting_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_rectangle_forbidden_zone_seting_stop_cb(user_context);
}

/**
 * @brief rectangle forbidden zone seting action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [rectangle forbidden zone seting action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_rectangle_forbidden_zone_seting_send(struct hey_action_ctx *ctx, struct robot_cleaner_rectangle_forbidden_zone_seting_out *action)
{
    int32_t ret = 0;
    Iot__Service__RobotCleaner__ActionOutRectangleForbiddenZoneSeting *out = NULL;
    uint8_t *buf = NULL;
    out = malloc(sizeof(Iot__Service__RobotCleaner__ActionOutRectangleForbiddenZoneSeting));
    if (NULL == out) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__action_out_rectangle_forbidden_zone_seting__init(out);
    out->code = action->code;
    size_t buf_len = iot__service__robot_cleaner__action_out_rectangle_forbidden_zone_seting__get_packed_size(out);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
    }
    iot__service__robot_cleaner__action_out_rectangle_forbidden_zone_seting__pack(out, buf);
    ret = hey_action_msg_send(ctx, buf_len, buf);

out:
    free(out);
    free(buf);
    return ret;
}

/**
 * @brief rectangle forbidden zone seting action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_rectangle_forbidden_zone_seting_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_designated_point_clean_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInDesignatedPointClean *designated_point_clean = iot__service__robot_cleaner__action_in_designated_point_clean__unpack(NULL, len, value);
    if (NULL == designated_point_clean) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_designated_point_clean_in action = { 0 };
    action.timeout = designated_point_clean->timeout;
    action.x = designated_point_clean->x;
    action.y = designated_point_clean->y;
    ret = robot_cleaner_designated_point_clean_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_designated_point_clean__free_unpacked(designated_point_clean, NULL);
    return ret;
}

static void action_designated_point_clean_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_designated_point_clean_stop_cb(user_context);
}

/**
 * @brief designated point clean action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [designated point clean action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_designated_point_clean_send(struct hey_action_ctx *ctx, struct robot_cleaner_designated_point_clean_out *action)
{
    int32_t ret = 0;
    Iot__Service__RobotCleaner__ActionOutDesignatedPointClean *out = NULL;
    uint8_t *buf = NULL;
    out = malloc(sizeof(Iot__Service__RobotCleaner__ActionOutDesignatedPointClean));
    if (NULL == out) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__action_out_designated_point_clean__init(out);
    out->code = action->code;
    size_t buf_len = iot__service__robot_cleaner__action_out_designated_point_clean__get_packed_size(out);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
    }
    iot__service__robot_cleaner__action_out_designated_point_clean__pack(out, buf);
    ret = hey_action_msg_send(ctx, buf_len, buf);

out:
    free(out);
    free(buf);
    return ret;
}

/**
 * @brief designated point clean action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_designated_point_clean_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_designated_room_clean_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInDesignatedRoomClean *designated_room_clean = iot__service__robot_cleaner__action_in_designated_room_clean__unpack(NULL, len, value);
    if (NULL == designated_room_clean) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_designated_room_clean_in action = { 0 };
    action.timeout = designated_room_clean->timeout;
    action.roomid = designated_room_clean->roomid;
    ret = robot_cleaner_designated_room_clean_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_designated_room_clean__free_unpacked(designated_room_clean, NULL);
    return ret;
}

static void action_designated_room_clean_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_designated_room_clean_stop_cb(user_context);
}

/**
 * @brief designated room clean action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [designated room clean action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_designated_room_clean_send(struct hey_action_ctx *ctx, struct robot_cleaner_designated_room_clean_out *action)
{
    int32_t ret = 0;
    Iot__Service__RobotCleaner__ActionOutDesignatedRoomClean *out = NULL;
    uint8_t *buf = NULL;
    out = malloc(sizeof(Iot__Service__RobotCleaner__ActionOutDesignatedRoomClean));
    if (NULL == out) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__action_out_designated_room_clean__init(out);
    out->code = action->code;
    size_t buf_len = iot__service__robot_cleaner__action_out_designated_room_clean__get_packed_size(out);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
    }
    iot__service__robot_cleaner__action_out_designated_room_clean__pack(out, buf);
    ret = hey_action_msg_send(ctx, buf_len, buf);

out:
    free(out);
    free(buf);
    return ret;
}

/**
 * @brief designated room clean action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_designated_room_clean_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static int32_t action_robot_map_reset_start_cb(void *cb_data, struct hey_action_ctx *ctx, size_t len, uint8_t *value, void **user_context)
{
    int32_t ret = -1;
    Iot__Service__RobotCleaner__ActionInRobotMapReset *robot_map_reset = iot__service__robot_cleaner__action_in_robot_map_reset__unpack(NULL, len, value);
    if (NULL == robot_map_reset) {
        hey_action_stop(ctx);
        return EINVAL;
    }

    struct robot_cleaner_robot_map_reset_in action = { 0 };
    ret = robot_cleaner_robot_map_reset_start_cb(ctx, &action, user_context);

    iot__service__robot_cleaner__action_in_robot_map_reset__free_unpacked(robot_map_reset, NULL);
    return ret;
}

static void action_robot_map_reset_stop_cb(void *cb_data, void *user_context)
{
    robot_cleaner_robot_map_reset_stop_cb(user_context);
}

/**
 * @brief robot map reset action send message of robot cleaner service
 * @param ctx      [action context]
 * @param action   [robot map reset action out]
 * @return int32_t [action send result, 0 means success]
 */
int32_t robot_cleaner_robot_map_reset_send(struct hey_action_ctx *ctx, struct robot_cleaner_robot_map_reset_out *action)
{
    int32_t ret = 0;
    Iot__Service__RobotCleaner__ActionOutRobotMapReset *out = NULL;
    uint8_t *buf = NULL;
    out = malloc(sizeof(Iot__Service__RobotCleaner__ActionOutRobotMapReset));
    if (NULL == out) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__action_out_robot_map_reset__init(out);
    out->code = action->code;
    size_t buf_len = iot__service__robot_cleaner__action_out_robot_map_reset__get_packed_size(out);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
    }
    iot__service__robot_cleaner__action_out_robot_map_reset__pack(out, buf);
    ret = hey_action_msg_send(ctx, buf_len, buf);

out:
    free(out);
    free(buf);
    return ret;
}

/**
 * @brief robot map reset action stop of robot cleaner service
 * @param ctx      [action context]
 * @return int32_t [action stop result, 0 means success]
 */
int32_t robot_cleaner_robot_map_reset_stop(struct hey_action_ctx *ctx)
{
    return hey_action_stop(ctx);
}

static Iot__Service__RobotCleaner__RectangleCleanZoneSetingDetail *_robot_cleaner_rectangle_clean_zone_seting_detail = NULL;
struct robot_cleaner_rectangle_clean_zone_seting_detail *robot_cleaner_rectangle_clean_zone_seting_detail_unpack(const uint8_t *data, size_t len)
{
    _robot_cleaner_rectangle_clean_zone_seting_detail = iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__unpack(NULL, len, data);
    if (NULL == _robot_cleaner_rectangle_clean_zone_seting_detail) {
        return NULL;
    }
    struct robot_cleaner_rectangle_clean_zone_seting_detail *hey_struct = malloc(sizeof(struct robot_cleaner_rectangle_clean_zone_seting_detail));
    if (NULL == hey_struct) {
        goto out1;
    }
    struct robot_cleaner_rectangle *zone = NULL;
    zone = malloc(sizeof(struct robot_cleaner_rectangle));
    if (NULL == zone) {
        goto out2;
    }
    zone->x0 = _robot_cleaner_rectangle_clean_zone_seting_detail->zone->x0;
    zone->y0 = _robot_cleaner_rectangle_clean_zone_seting_detail->zone->y0;
    zone->x1 = _robot_cleaner_rectangle_clean_zone_seting_detail->zone->x1;
    zone->y1 = _robot_cleaner_rectangle_clean_zone_seting_detail->zone->y1;
    hey_struct->zone = zone;
    return hey_struct;
out2:
    free(zone);
    free(hey_struct);
out1:
    iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__free_unpacked(_robot_cleaner_rectangle_clean_zone_seting_detail, NULL);
    return NULL;
}

void robot_cleaner_rectangle_clean_zone_seting_detail_free_unpacked(struct robot_cleaner_rectangle_clean_zone_seting_detail *data)
{
    assert(NULL != data);
    iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__free_unpacked(_robot_cleaner_rectangle_clean_zone_seting_detail, NULL);
    free(data->zone);
    free(data);
}

int32_t robot_cleaner_rectangle_clean_zone_seting_detail_get_packed_size(const struct robot_cleaner_rectangle_clean_zone_seting_detail *data)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RectangleCleanZoneSetingDetail *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RectangleCleanZoneSetingDetail));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__init(pb_struct);
    Iot__Service__RobotCleaner__Rectangle *zone = NULL;
    if (data->zone) {
        zone = malloc(sizeof(Iot__Service__RobotCleaner__Rectangle));
        if (NULL == zone) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__rectangle__init(zone);
        zone->x0 = data->zone->x0;
        zone->y0 = data->zone->y0;
        zone->x1 = data->zone->x1;
        zone->y1 = data->zone->y1;
    }
    pb_struct->zone = zone;
    ret = iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__get_packed_size(pb_struct);
out:
    free(zone);
    free(pb_struct);
    return ret;
}

int32_t robot_cleaner_rectangle_clean_zone_seting_detail_pack(const struct robot_cleaner_rectangle_clean_zone_seting_detail *data, uint8_t *out)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RectangleCleanZoneSetingDetail *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RectangleCleanZoneSetingDetail));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__init(pb_struct);
    Iot__Service__RobotCleaner__Rectangle *zone = NULL;
    if (data->zone) {
        zone = malloc(sizeof(Iot__Service__RobotCleaner__Rectangle));
        if (NULL == zone) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__rectangle__init(zone);
        zone->x0 = data->zone->x0;
        zone->y0 = data->zone->y0;
        zone->x1 = data->zone->x1;
        zone->y1 = data->zone->y1;
    }
    pb_struct->zone = zone;
    ret = iot__service__robot_cleaner__rectangle_clean_zone_seting_detail__pack(pb_struct, out);
out:
    free(zone);
    free(pb_struct);
    return ret;
}

static Iot__Service__RobotCleaner__RectangleForbiddenZoneSetingDetail *_robot_cleaner_rectangle_forbidden_zone_seting_detail = NULL;
struct robot_cleaner_rectangle_forbidden_zone_seting_detail *robot_cleaner_rectangle_forbidden_zone_seting_detail_unpack(const uint8_t *data, size_t len)
{
    _robot_cleaner_rectangle_forbidden_zone_seting_detail = iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__unpack(NULL, len, data);
    if (NULL == _robot_cleaner_rectangle_forbidden_zone_seting_detail) {
        return NULL;
    }
    struct robot_cleaner_rectangle_forbidden_zone_seting_detail *hey_struct = malloc(sizeof(struct robot_cleaner_rectangle_forbidden_zone_seting_detail));
    if (NULL == hey_struct) {
        goto out1;
    }
    struct robot_cleaner_rectangle *zone = NULL;
    zone = malloc(sizeof(struct robot_cleaner_rectangle));
    if (NULL == zone) {
        goto out2;
    }
    zone->x0 = _robot_cleaner_rectangle_forbidden_zone_seting_detail->zone->x0;
    zone->y0 = _robot_cleaner_rectangle_forbidden_zone_seting_detail->zone->y0;
    zone->x1 = _robot_cleaner_rectangle_forbidden_zone_seting_detail->zone->x1;
    zone->y1 = _robot_cleaner_rectangle_forbidden_zone_seting_detail->zone->y1;
    hey_struct->zone = zone;
    return hey_struct;
out2:
    free(zone);
    free(hey_struct);
out1:
    iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__free_unpacked(_robot_cleaner_rectangle_forbidden_zone_seting_detail, NULL);
    return NULL;
}

void robot_cleaner_rectangle_forbidden_zone_seting_detail_free_unpacked(struct robot_cleaner_rectangle_forbidden_zone_seting_detail *data)
{
    assert(NULL != data);
    iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__free_unpacked(_robot_cleaner_rectangle_forbidden_zone_seting_detail, NULL);
    free(data->zone);
    free(data);
}

int32_t robot_cleaner_rectangle_forbidden_zone_seting_detail_get_packed_size(const struct robot_cleaner_rectangle_forbidden_zone_seting_detail *data)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RectangleForbiddenZoneSetingDetail *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RectangleForbiddenZoneSetingDetail));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__init(pb_struct);
    Iot__Service__RobotCleaner__Rectangle *zone = NULL;
    if (data->zone) {
        zone = malloc(sizeof(Iot__Service__RobotCleaner__Rectangle));
        if (NULL == zone) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__rectangle__init(zone);
        zone->x0 = data->zone->x0;
        zone->y0 = data->zone->y0;
        zone->x1 = data->zone->x1;
        zone->y1 = data->zone->y1;
    }
    pb_struct->zone = zone;
    ret = iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__get_packed_size(pb_struct);
out:
    free(zone);
    free(pb_struct);
    return ret;
}

int32_t robot_cleaner_rectangle_forbidden_zone_seting_detail_pack(const struct robot_cleaner_rectangle_forbidden_zone_seting_detail *data, uint8_t *out)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RectangleForbiddenZoneSetingDetail *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RectangleForbiddenZoneSetingDetail));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__init(pb_struct);
    Iot__Service__RobotCleaner__Rectangle *zone = NULL;
    if (data->zone) {
        zone = malloc(sizeof(Iot__Service__RobotCleaner__Rectangle));
        if (NULL == zone) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__rectangle__init(zone);
        zone->x0 = data->zone->x0;
        zone->y0 = data->zone->y0;
        zone->x1 = data->zone->x1;
        zone->y1 = data->zone->y1;
    }
    pb_struct->zone = zone;
    ret = iot__service__robot_cleaner__rectangle_forbidden_zone_seting_detail__pack(pb_struct, out);
out:
    free(zone);
    free(pb_struct);
    return ret;
}

static Iot__Service__RobotCleaner__RoomCleanSeting *_robot_cleaner_room_clean_seting = NULL;
struct robot_cleaner_room_clean_seting *robot_cleaner_room_clean_seting_unpack(const uint8_t *data, size_t len)
{
    _robot_cleaner_room_clean_seting = iot__service__robot_cleaner__room_clean_seting__unpack(NULL, len, data);
    if (NULL == _robot_cleaner_room_clean_seting) {
        return NULL;
    }
    struct robot_cleaner_room_clean_seting *hey_struct = malloc(sizeof(struct robot_cleaner_room_clean_seting));
    if (NULL == hey_struct) {
        goto out1;
    }
    hey_struct->name = _robot_cleaner_room_clean_seting->name;
    hey_struct->robotsuctionlevel = _robot_cleaner_room_clean_seting->robotsuctionlevel;
    hey_struct->robotsupplywaterrate = _robot_cleaner_room_clean_seting->robotsupplywaterrate;
    hey_struct->cleantimes = _robot_cleaner_room_clean_seting->cleantimes;
    return hey_struct;
out1:
    iot__service__robot_cleaner__room_clean_seting__free_unpacked(_robot_cleaner_room_clean_seting, NULL);
    return NULL;
}

void robot_cleaner_room_clean_seting_free_unpacked(struct robot_cleaner_room_clean_seting *data)
{
    assert(NULL != data);
    iot__service__robot_cleaner__room_clean_seting__free_unpacked(_robot_cleaner_room_clean_seting, NULL);
    free(data);
}

int32_t robot_cleaner_room_clean_seting_get_packed_size(const struct robot_cleaner_room_clean_seting *data)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RoomCleanSeting *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RoomCleanSeting));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__room_clean_seting__init(pb_struct);
    pb_struct->name = data->name;
    pb_struct->robotsuctionlevel = data->robotsuctionlevel;
    pb_struct->robotsupplywaterrate = data->robotsupplywaterrate;
    pb_struct->cleantimes = data->cleantimes;
    ret = iot__service__robot_cleaner__room_clean_seting__get_packed_size(pb_struct);
    free(pb_struct);
    return ret;
}

int32_t robot_cleaner_room_clean_seting_pack(const struct robot_cleaner_room_clean_seting *data, uint8_t *out)
{
    assert(data);
    int ret = 0;
    Iot__Service__RobotCleaner__RoomCleanSeting *pb_struct = malloc(sizeof(Iot__Service__RobotCleaner__RoomCleanSeting));
    if (pb_struct == NULL) {
        return -1;
    }
    iot__service__robot_cleaner__room_clean_seting__init(pb_struct);
    pb_struct->name = data->name;
    pb_struct->robotsuctionlevel = data->robotsuctionlevel;
    pb_struct->robotsupplywaterrate = data->robotsupplywaterrate;
    pb_struct->cleantimes = data->cleantimes;
    ret = iot__service__robot_cleaner__room_clean_seting__pack(pb_struct, out);
    free(pb_struct);
    return ret;
}

static int32_t service_robot_cleaner_properties_write_cb(void *cb_data, size_t n_iid, uint32_t *iids,
                                                         size_t len, uint8_t *value)
{
    Iot__Service__RobotCleaner__Properties *props = iot__service__robot_cleaner__properties__unpack(NULL, len, value);
    if (NULL == props) {
        return EINVAL;
    }

    int32_t ret = 0;
    struct robot_cleaner_properties properties = { 0 };
    struct robot_cleaner_no_disturbing_period nodisturbingperiod = { 0 };
    struct hey_array_node **rectanglecleanzonesetingdetail = NULL;
    struct hey_array_node **rectangleforbiddenzonesetingdetail = NULL;
    struct hey_array_node **roomcleanseting = NULL;
    struct robot_cleaner_designated_point_clean_seting_detail designatedpointcleansetingdetail = { 0 };
    if (props->nodisturbingperiod) {
        nodisturbingperiod.status = props->nodisturbingperiod->status;
        nodisturbingperiod.week = props->nodisturbingperiod->week;
        nodisturbingperiod.fromhour = props->nodisturbingperiod->fromhour;
        nodisturbingperiod.fromminute = props->nodisturbingperiod->fromminute;
        nodisturbingperiod.fromsec = props->nodisturbingperiod->fromsec;
        nodisturbingperiod.tohour = props->nodisturbingperiod->tohour;
        nodisturbingperiod.tominute = props->nodisturbingperiod->tominute;
        nodisturbingperiod.tosec = props->nodisturbingperiod->tosec;
    }
    if (props->designatedpointcleansetingdetail) {
        designatedpointcleansetingdetail.x = props->designatedpointcleansetingdetail->x;
        designatedpointcleansetingdetail.y = props->designatedpointcleansetingdetail->y;
    }
    properties.power = props->power;
    properties.operationmode = props->operationmode;
    properties.robotjobstatus = props->robotjobstatus;
    properties.robotcleanmode = props->robotcleanmode;
    properties.robotsuctionlevel = props->robotsuctionlevel;
    properties.soundvolume = props->soundvolume;
    properties.operationtime = props->operationtime;
    properties.remaintime = props->remaintime;
    properties.cleanarea = props->cleanarea;
    properties.processingpercentage = props->processingpercentage;
    properties.totalcleantime = props->totalcleantime;
    properties.totalcleanarea = props->totalcleanarea;
    properties.totalcycle = props->totalcycle;
    properties.sidebrushlefttime = props->sidebrushlefttime;
    properties.sidebrushlifetime = props->sidebrushlifetime;
    properties.rollbrushlefttime = props->rollbrushlefttime;
    properties.rollbrushlifetime = props->rollbrushlifetime;
    properties.hepalefttime = props->hepalefttime;
    properties.hepalifetime = props->hepalifetime;
    properties.filterlefttime = props->filterlefttime;
    properties.filterlifttime = props->filterlifttime;
    properties.nodisturbingperiod = &nodisturbingperiod;
    properties.robotsupplywaterrate = props->robotsupplywaterrate;
    properties.carpetincreasessuction = props->carpetincreasessuction;
    if (props->n_rectanglecleanzonesetingdetail) {
        rectanglecleanzonesetingdetail = calloc(props->n_rectanglecleanzonesetingdetail, sizeof(struct hey_array_node *));
        if (rectanglecleanzonesetingdetail == NULL) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < props->n_rectanglecleanzonesetingdetail; i++) {
            rectanglecleanzonesetingdetail[i] = malloc(sizeof(struct hey_array_node));
            if (rectanglecleanzonesetingdetail[i] == NULL) {
                ret = ENOMEM;
                goto out;
            }
            rectanglecleanzonesetingdetail[i]->id = props->rectanglecleanzonesetingdetail[i]->id;
            rectanglecleanzonesetingdetail[i]->data.data = props->rectanglecleanzonesetingdetail[i]->data.data;
            rectanglecleanzonesetingdetail[i]->data.len = props->rectanglecleanzonesetingdetail[i]->data.len;
        }
        properties.n_rectanglecleanzonesetingdetail = props->n_rectanglecleanzonesetingdetail;
        properties.rectanglecleanzonesetingdetail = rectanglecleanzonesetingdetail;
    }
    if (props->n_rectangleforbiddenzonesetingdetail) {
        rectangleforbiddenzonesetingdetail = calloc(props->n_rectangleforbiddenzonesetingdetail, sizeof(struct hey_array_node *));
        if (rectangleforbiddenzonesetingdetail == NULL) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < props->n_rectangleforbiddenzonesetingdetail; i++) {
            rectangleforbiddenzonesetingdetail[i] = malloc(sizeof(struct hey_array_node));
            if (rectangleforbiddenzonesetingdetail[i] == NULL) {
                ret = ENOMEM;
                goto out;
            }
            rectangleforbiddenzonesetingdetail[i]->id = props->rectangleforbiddenzonesetingdetail[i]->id;
            rectangleforbiddenzonesetingdetail[i]->data.data = props->rectangleforbiddenzonesetingdetail[i]->data.data;
            rectangleforbiddenzonesetingdetail[i]->data.len = props->rectangleforbiddenzonesetingdetail[i]->data.len;
        }
        properties.n_rectangleforbiddenzonesetingdetail = props->n_rectangleforbiddenzonesetingdetail;
        properties.rectangleforbiddenzonesetingdetail = rectangleforbiddenzonesetingdetail;
    }
    if (props->n_roomcleanseting) {
        roomcleanseting = calloc(props->n_roomcleanseting, sizeof(struct hey_array_node *));
        if (roomcleanseting == NULL) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < props->n_roomcleanseting; i++) {
            roomcleanseting[i] = malloc(sizeof(struct hey_array_node));
            if (roomcleanseting[i] == NULL) {
                ret = ENOMEM;
                goto out;
            }
            roomcleanseting[i]->id = props->roomcleanseting[i]->id;
            roomcleanseting[i]->data.data = props->roomcleanseting[i]->data.data;
            roomcleanseting[i]->data.len = props->roomcleanseting[i]->data.len;
        }
        properties.n_roomcleanseting = props->n_roomcleanseting;
        properties.roomcleanseting = roomcleanseting;
    }
    properties.currentmapid = props->currentmapid;
    properties.designatedpointcleansetingdetail = &designatedpointcleansetingdetail;
    properties.breakpointresumeenabled = props->breakpointresumeenabled;
    ret = robot_cleaner_properties_write_cb(n_iid, iids, &properties);

out:
    if (rectanglecleanzonesetingdetail) {
        for (int i = 0; i < props->n_rectanglecleanzonesetingdetail; i++) {
            free(rectanglecleanzonesetingdetail[i]);
        }
        free(rectanglecleanzonesetingdetail);
    }
    if (rectangleforbiddenzonesetingdetail) {
        for (int i = 0; i < props->n_rectangleforbiddenzonesetingdetail; i++) {
            free(rectangleforbiddenzonesetingdetail[i]);
        }
        free(rectangleforbiddenzonesetingdetail);
    }
    if (roomcleanseting) {
        for (int i = 0; i < props->n_roomcleanseting; i++) {
            free(roomcleanseting[i]);
        }
        free(roomcleanseting);
    }
    iot__service__robot_cleaner__properties__free_unpacked(props, NULL);
    return ret;
}

static int32_t service_robot_cleaner_properties_array_add_cb(void *cb_data, uint32_t iid, size_t len, uint8_t *value)
{
    switch(iid) {
    case ROBOT_CLEANER_PROPERTY_RECTANGLECLEANZONESETINGDETAIL:
        return robot_cleaner_rectanglecleanzonesetingdetail_array_add_cb(len, value);
    case ROBOT_CLEANER_PROPERTY_RECTANGLEFORBIDDENZONESETINGDETAIL:
        return robot_cleaner_rectangleforbiddenzonesetingdetail_array_add_cb(len, value);
    case ROBOT_CLEANER_PROPERTY_ROOMCLEANSETING:
        return robot_cleaner_roomcleanseting_array_add_cb(len, value);
    default:
        return -1;
    }
}

static int32_t service_robot_cleaner_properties_array_del_cb(void *cb_data, uint32_t iid, size_t n_id, uint32_t *ids)
{
    switch(iid) {
    case ROBOT_CLEANER_PROPERTY_RECTANGLECLEANZONESETINGDETAIL:
        return robot_cleaner_rectanglecleanzonesetingdetail_array_del_cb(n_id, ids);
    case ROBOT_CLEANER_PROPERTY_RECTANGLEFORBIDDENZONESETINGDETAIL:
        return robot_cleaner_rectangleforbiddenzonesetingdetail_array_del_cb(n_id, ids);
    case ROBOT_CLEANER_PROPERTY_ROOMCLEANSETING:
        return robot_cleaner_roomcleanseting_array_del_cb(n_id, ids);
    default:
        return -1;
    }
}

static int32_t service_robot_cleaner_properties_array_replace_cb(void *cb_data, uint32_t iid, uint32_t id, size_t len, uint8_t *value)
{
    switch(iid) {
    case ROBOT_CLEANER_PROPERTY_RECTANGLECLEANZONESETINGDETAIL:
        return robot_cleaner_rectanglecleanzonesetingdetail_array_replace_cb(id, len, value);
    case ROBOT_CLEANER_PROPERTY_RECTANGLEFORBIDDENZONESETINGDETAIL:
        return robot_cleaner_rectangleforbiddenzonesetingdetail_array_replace_cb(id, len, value);
    case ROBOT_CLEANER_PROPERTY_ROOMCLEANSETING:
        return robot_cleaner_roomcleanseting_array_replace_cb(id, len, value);
    default:
        return -1;
    }
}

static const struct hey_properties_callbacks props_cbs = {
    .write = service_robot_cleaner_properties_write_cb,
    .array_add = service_robot_cleaner_properties_array_add_cb,
    .array_del = service_robot_cleaner_properties_array_del_cb,
    .array_replace = service_robot_cleaner_properties_array_replace_cb,
};

static const struct hey_action_ctx_callbacks sound_alarm_cbs = {
    .start = action_sound_alarm_start_cb,
    .stop = action_sound_alarm_stop_cb
};

static const struct hey_action_ctx_callbacks robot_homing_cbs = {
    .start = action_robot_homing_start_cb,
    .stop = action_robot_homing_stop_cb
};

static const struct hey_action_ctx_callbacks stop_homing_cbs = {
    .start = action_stop_homing_start_cb,
    .stop = action_stop_homing_stop_cb
};

static const struct hey_action_ctx_callbacks motion_control_cbs = {
    .start = action_motion_control_start_cb,
    .stop = action_motion_control_stop_cb
};

static const struct hey_action_ctx_callbacks side_brush_reset_cbs = {
    .start = action_side_brush_reset_start_cb,
    .stop = action_side_brush_reset_stop_cb
};

static const struct hey_action_ctx_callbacks roll_brush_reset_cbs = {
    .start = action_roll_brush_reset_start_cb,
    .stop = action_roll_brush_reset_stop_cb
};

static const struct hey_action_ctx_callbacks hepa_reset_cbs = {
    .start = action_hepa_reset_start_cb,
    .stop = action_hepa_reset_stop_cb
};

static const struct hey_action_ctx_callbacks filter_reset_cbs = {
    .start = action_filter_reset_start_cb,
    .stop = action_filter_reset_stop_cb
};

static const struct hey_action_ctx_callbacks rectangle_clean_zone_seting_cbs = {
    .start = action_rectangle_clean_zone_seting_start_cb,
    .stop = action_rectangle_clean_zone_seting_stop_cb
};

static const struct hey_action_ctx_callbacks rectangle_forbidden_zone_seting_cbs = {
    .start = action_rectangle_forbidden_zone_seting_start_cb,
    .stop = action_rectangle_forbidden_zone_seting_stop_cb
};

static const struct hey_action_ctx_callbacks designated_point_clean_cbs = {
    .start = action_designated_point_clean_start_cb,
    .stop = action_designated_point_clean_stop_cb
};

static const struct hey_action_ctx_callbacks designated_room_clean_cbs = {
    .start = action_designated_room_clean_start_cb,
    .stop = action_designated_room_clean_stop_cb
};

static const struct hey_action_ctx_callbacks robot_map_reset_cbs = {
    .start = action_robot_map_reset_start_cb,
    .stop = action_robot_map_reset_stop_cb
};

static const struct hey_action_entry actions_iids[] = {
    [0] = { .iid = ROBOT_CLEANER_ACTION_SOUND_ALARM, .type = HEY_ACTION_ONCE, .cbs = &sound_alarm_cbs },
    [1] = { .iid = ROBOT_CLEANER_ACTION_ROBOT_HOMING, .type = HEY_ACTION_ONCE, .cbs = &robot_homing_cbs },
    [2] = { .iid = ROBOT_CLEANER_ACTION_STOP_HOMING, .type = HEY_ACTION_ONCE, .cbs = &stop_homing_cbs },
    [3] = { .iid = ROBOT_CLEANER_ACTION_MOTION_CONTROL, .type = HEY_ACTION_ONCE, .cbs = &motion_control_cbs },
    [4] = { .iid = ROBOT_CLEANER_ACTION_SIDE_BRUSH_RESET, .type = HEY_ACTION_ONCE, .cbs = &side_brush_reset_cbs },
    [5] = { .iid = ROBOT_CLEANER_ACTION_ROLL_BRUSH_RESET, .type = HEY_ACTION_ONCE, .cbs = &roll_brush_reset_cbs },
    [6] = { .iid = ROBOT_CLEANER_ACTION_HEPA_RESET, .type = HEY_ACTION_ONCE, .cbs = &hepa_reset_cbs },
    [7] = { .iid = ROBOT_CLEANER_ACTION_FILTER_RESET, .type = HEY_ACTION_ONCE, .cbs = &filter_reset_cbs },
    [8] = { .iid = ROBOT_CLEANER_ACTION_RECTANGLE_CLEAN_ZONE_SETING, .type = HEY_ACTION_ONCE, .cbs = &rectangle_clean_zone_seting_cbs },
    [9] = { .iid = ROBOT_CLEANER_ACTION_RECTANGLE_FORBIDDEN_ZONE_SETING, .type = HEY_ACTION_ONCE, .cbs = &rectangle_forbidden_zone_seting_cbs },
    [10] = { .iid = ROBOT_CLEANER_ACTION_DESIGNATED_POINT_CLEAN, .type = HEY_ACTION_ONCE, .cbs = &designated_point_clean_cbs },
    [11] = { .iid = ROBOT_CLEANER_ACTION_DESIGNATED_ROOM_CLEAN, .type = HEY_ACTION_ONCE, .cbs = &designated_room_clean_cbs },
    [12] = { .iid = ROBOT_CLEANER_ACTION_ROBOT_MAP_RESET, .type = HEY_ACTION_ONCE, .cbs = &robot_map_reset_cbs },
};

static int robot_cleaner_service_register(Iot__Service__RobotCleaner__Properties *props)
{
    uint8_t *buf;
    size_t buf_len;
    buf_len = iot__service__robot_cleaner__properties__get_packed_size(props);
    if (buf_len == 0) {
        buf = NULL;
    } else {
        buf = malloc(buf_len);
        if (!buf) {
            return ENOMEM;
        }
        iot__service__robot_cleaner__properties__pack(props, buf);
    }

    struct hey_schema_service schema_srv;
    hey_schema_service_init(&schema_srv);
    schema_srv.properties.iids = (struct hey_schema_property *)robot_cleaner_properties_iids;
    schema_srv.properties.n_iid = PROP_IID_CNT;
    schema_srv.properties.value = buf;
    schema_srv.properties.len = buf_len;
    schema_srv.properties.cbs = &props_cbs;
    schema_srv.actions.iids = (struct hey_action_entry *)actions_iids;
    schema_srv.actions.n_iid = ACT_IID_CNT;
    schema_srv.events.iids = (uint32_t *)robot_cleaner_event_iids;
    schema_srv.events.n_iid = EV_IID_CNT;
    robot_cleaner_service = hey_service_register(ROBOT_CLEANER_SERVICE, &schema_srv, NULL);
    if (NULL == robot_cleaner_service) {
        free(buf);
        return errno;
    }

    free(buf);
    return 0;
}

/**
 * @brief update properties of robot cleaner service
 * @param count      [the number of properties to be updated]
 * @param enumerate  [the iid enumeration of properties to be updated]
 * @param properties [properties structure with updated content]
 * @return int32_t   [update result]
 */
int32_t robot_cleaner_properties_update(size_t count, uint32_t *enumerate, struct robot_cleaner_properties *properties)
{
    assert(count <= PROP_IID_CNT);
    if (NULL == properties) {
        return EINVAL;
    }

    int ret = 0;
    Iot__Service__RobotCleaner__Properties *props = NULL;
    uint8_t *buf = NULL;
    Iot__Service__RobotCleaner__NoDisturbingPeriod *nodisturbingperiod = NULL;
    ArrayNode **rectanglecleanzonesetingdetail = NULL;
    ArrayNode **rectangleforbiddenzonesetingdetail = NULL;
    ArrayNode **roomcleanseting = NULL;
    Iot__Service__RobotCleaner__DesignatedPointCleanSetingDetail *designatedpointcleansetingdetail = NULL;
    props = malloc(sizeof(Iot__Service__RobotCleaner__Properties));
    if (NULL == props) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__properties__init(props);
    if (properties->nodisturbingperiod) {
        nodisturbingperiod = malloc(sizeof(Iot__Service__RobotCleaner__NoDisturbingPeriod));
        if (NULL == nodisturbingperiod) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__no_disturbing_period__init(nodisturbingperiod);
        nodisturbingperiod->status = properties->nodisturbingperiod->status;
        nodisturbingperiod->week = properties->nodisturbingperiod->week;
        nodisturbingperiod->fromhour = properties->nodisturbingperiod->fromhour;
        nodisturbingperiod->fromminute = properties->nodisturbingperiod->fromminute;
        nodisturbingperiod->fromsec = properties->nodisturbingperiod->fromsec;
        nodisturbingperiod->tohour = properties->nodisturbingperiod->tohour;
        nodisturbingperiod->tominute = properties->nodisturbingperiod->tominute;
        nodisturbingperiod->tosec = properties->nodisturbingperiod->tosec;
    }
    if (properties->n_rectanglecleanzonesetingdetail) {
        rectanglecleanzonesetingdetail = calloc(properties->n_rectanglecleanzonesetingdetail, sizeof(ArrayNode *));
        if (NULL == rectanglecleanzonesetingdetail) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < properties->n_rectanglecleanzonesetingdetail; i++) {
            rectanglecleanzonesetingdetail[i] = malloc(sizeof(ArrayNode));
            if (NULL == rectanglecleanzonesetingdetail[i]) {
                ret = ENOMEM;
                goto out;
            }
            array_node__init(rectanglecleanzonesetingdetail[i]);
            rectanglecleanzonesetingdetail[i]->id = properties->rectanglecleanzonesetingdetail[i]->id;
            rectanglecleanzonesetingdetail[i]->data.data = properties->rectanglecleanzonesetingdetail[i]->data.data;
            rectanglecleanzonesetingdetail[i]->data.len = properties->rectanglecleanzonesetingdetail[i]->data.len;
        }
    }
    if (properties->n_rectangleforbiddenzonesetingdetail) {
        rectangleforbiddenzonesetingdetail = calloc(properties->n_rectangleforbiddenzonesetingdetail, sizeof(ArrayNode *));
        if (NULL == rectangleforbiddenzonesetingdetail) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < properties->n_rectangleforbiddenzonesetingdetail; i++) {
            rectangleforbiddenzonesetingdetail[i] = malloc(sizeof(ArrayNode));
            if (NULL == rectangleforbiddenzonesetingdetail[i]) {
                ret = ENOMEM;
                goto out;
            }
            array_node__init(rectangleforbiddenzonesetingdetail[i]);
            rectangleforbiddenzonesetingdetail[i]->id = properties->rectangleforbiddenzonesetingdetail[i]->id;
            rectangleforbiddenzonesetingdetail[i]->data.data = properties->rectangleforbiddenzonesetingdetail[i]->data.data;
            rectangleforbiddenzonesetingdetail[i]->data.len = properties->rectangleforbiddenzonesetingdetail[i]->data.len;
        }
    }
    if (properties->n_roomcleanseting) {
        roomcleanseting = calloc(properties->n_roomcleanseting, sizeof(ArrayNode *));
        if (NULL == roomcleanseting) {
            ret = ENOMEM;
            goto out;
        }
        for (int i = 0; i < properties->n_roomcleanseting; i++) {
            roomcleanseting[i] = malloc(sizeof(ArrayNode));
            if (NULL == roomcleanseting[i]) {
                ret = ENOMEM;
                goto out;
            }
            array_node__init(roomcleanseting[i]);
            roomcleanseting[i]->id = properties->roomcleanseting[i]->id;
            roomcleanseting[i]->data.data = properties->roomcleanseting[i]->data.data;
            roomcleanseting[i]->data.len = properties->roomcleanseting[i]->data.len;
        }
    }
    if (properties->designatedpointcleansetingdetail) {
        designatedpointcleansetingdetail = malloc(sizeof(Iot__Service__RobotCleaner__DesignatedPointCleanSetingDetail));
        if (NULL == designatedpointcleansetingdetail) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__designated_point_clean_seting_detail__init(designatedpointcleansetingdetail);
        designatedpointcleansetingdetail->x = properties->designatedpointcleansetingdetail->x;
        designatedpointcleansetingdetail->y = properties->designatedpointcleansetingdetail->y;
    }
    props->power = properties->power;
    props->operationmode = properties->operationmode;
    props->robotjobstatus = properties->robotjobstatus;
    props->robotcleanmode = properties->robotcleanmode;
    props->robotsuctionlevel = properties->robotsuctionlevel;
    props->soundvolume = properties->soundvolume;
    props->operationtime = properties->operationtime;
    props->remaintime = properties->remaintime;
    props->cleanarea = properties->cleanarea;
    props->processingpercentage = properties->processingpercentage;
    props->totalcleantime = properties->totalcleantime;
    props->totalcleanarea = properties->totalcleanarea;
    props->totalcycle = properties->totalcycle;
    props->sidebrushlefttime = properties->sidebrushlefttime;
    props->sidebrushlifetime = properties->sidebrushlifetime;
    props->rollbrushlefttime = properties->rollbrushlefttime;
    props->rollbrushlifetime = properties->rollbrushlifetime;
    props->hepalefttime = properties->hepalefttime;
    props->hepalifetime = properties->hepalifetime;
    props->filterlefttime = properties->filterlefttime;
    props->filterlifttime = properties->filterlifttime;
    props->nodisturbingperiod = nodisturbingperiod;
    props->robotsupplywaterrate = properties->robotsupplywaterrate;
    props->carpetincreasessuction = properties->carpetincreasessuction;
    props->n_rectanglecleanzonesetingdetail = properties->n_rectanglecleanzonesetingdetail;
    props->rectanglecleanzonesetingdetail = rectanglecleanzonesetingdetail;
    props->n_rectangleforbiddenzonesetingdetail = properties->n_rectangleforbiddenzonesetingdetail;
    props->rectangleforbiddenzonesetingdetail = rectangleforbiddenzonesetingdetail;
    props->n_roomcleanseting = properties->n_roomcleanseting;
    props->roomcleanseting = roomcleanseting;
    props->currentmapid = properties->currentmapid;
    props->designatedpointcleansetingdetail = designatedpointcleansetingdetail;
    props->breakpointresumeenabled = properties->breakpointresumeenabled;

    size_t buf_len;
    buf_len = iot__service__robot_cleaner__properties__get_packed_size(props);
    if (buf_len > 0) {
        buf = malloc(buf_len);
        if (NULL == buf) {
            ret = ENOMEM;
            goto out;
        }
        iot__service__robot_cleaner__properties__pack(props, buf);
    }

    struct hey_properties_content content = {
        .n_iid = count,
        .iids = enumerate,
        .len = buf_len,
        .value = buf
    };
    ret = hey_properties_update(robot_cleaner_service, &content);

out:
    free(props);
    free(buf);
    free(nodisturbingperiod);
    if (rectanglecleanzonesetingdetail) {
        for (int i = 0; i < properties->n_rectanglecleanzonesetingdetail; i++) {
            free(rectanglecleanzonesetingdetail[i]);
        }
        free(rectanglecleanzonesetingdetail);
    }
    if (rectangleforbiddenzonesetingdetail) {
        for (int i = 0; i < properties->n_rectangleforbiddenzonesetingdetail; i++) {
            free(rectangleforbiddenzonesetingdetail[i]);
        }
        free(rectangleforbiddenzonesetingdetail);
    }
    if (roomcleanseting) {
        for (int i = 0; i < properties->n_roomcleanseting; i++) {
            free(roomcleanseting[i]);
        }
        free(roomcleanseting);
    }
    free(designatedpointcleansetingdetail);
    return ret;
}

/**
 * @brief robot cleaner service initialization
 * @param properties [robot cleaner service properties]
 * @return int32_t   [initialize result]
*/
int32_t robot_cleaner_service_init(const struct robot_cleaner_properties *properties)
{
    int ret = 0;
    Iot__Service__RobotCleaner__Properties *props = NULL;
    Iot__Service__RobotCleaner__NoDisturbingPeriod *nodisturbingperiod = NULL;
    ArrayNode **rectanglecleanzonesetingdetail = NULL;
    ArrayNode **rectangleforbiddenzonesetingdetail = NULL;
    ArrayNode **roomcleanseting = NULL;
    Iot__Service__RobotCleaner__DesignatedPointCleanSetingDetail *designatedpointcleansetingdetail = NULL;
    props = malloc(sizeof(Iot__Service__RobotCleaner__Properties));
    if (NULL == props) {
        ret = ENOMEM;
        goto out;
    }
    iot__service__robot_cleaner__properties__init(props);
    if (NULL != properties) {
        if (properties->nodisturbingperiod) {
            nodisturbingperiod = malloc(sizeof(Iot__Service__RobotCleaner__NoDisturbingPeriod));
            if (NULL == nodisturbingperiod) {
                ret = ENOMEM;
                goto out;
            }
            iot__service__robot_cleaner__no_disturbing_period__init(nodisturbingperiod);
            nodisturbingperiod->status = properties->nodisturbingperiod->status;
            nodisturbingperiod->week = properties->nodisturbingperiod->week;
            nodisturbingperiod->fromhour = properties->nodisturbingperiod->fromhour;
            nodisturbingperiod->fromminute = properties->nodisturbingperiod->fromminute;
            nodisturbingperiod->fromsec = properties->nodisturbingperiod->fromsec;
            nodisturbingperiod->tohour = properties->nodisturbingperiod->tohour;
            nodisturbingperiod->tominute = properties->nodisturbingperiod->tominute;
            nodisturbingperiod->tosec = properties->nodisturbingperiod->tosec;
        }
        if (properties->n_rectanglecleanzonesetingdetail) {
            rectanglecleanzonesetingdetail = calloc(properties->n_rectanglecleanzonesetingdetail, sizeof(ArrayNode *));
            if (NULL == rectanglecleanzonesetingdetail) {
                ret = ENOMEM;
                goto out;
            }
            for (int i = 0; i < properties->n_rectanglecleanzonesetingdetail; i++) {
                rectanglecleanzonesetingdetail[i] = malloc(sizeof(ArrayNode));
                if (NULL == rectanglecleanzonesetingdetail[i]) {
                    ret = ENOMEM;
                    goto out;
                }
                array_node__init(rectanglecleanzonesetingdetail[i]);
                rectanglecleanzonesetingdetail[i]->id = properties->rectanglecleanzonesetingdetail[i]->id;
                rectanglecleanzonesetingdetail[i]->data.data = properties->rectanglecleanzonesetingdetail[i]->data.data;
                rectanglecleanzonesetingdetail[i]->data.len = properties->rectanglecleanzonesetingdetail[i]->data.len;
            }
        }
        if (properties->n_rectangleforbiddenzonesetingdetail) {
            rectangleforbiddenzonesetingdetail = calloc(properties->n_rectangleforbiddenzonesetingdetail, sizeof(ArrayNode *));
            if (NULL == rectangleforbiddenzonesetingdetail) {
                ret = ENOMEM;
                goto out;
            }
            for (int i = 0; i < properties->n_rectangleforbiddenzonesetingdetail; i++) {
                rectangleforbiddenzonesetingdetail[i] = malloc(sizeof(ArrayNode));
                if (NULL == rectangleforbiddenzonesetingdetail[i]) {
                    ret = ENOMEM;
                    goto out;
                }
                array_node__init(rectangleforbiddenzonesetingdetail[i]);
                rectangleforbiddenzonesetingdetail[i]->id = properties->rectangleforbiddenzonesetingdetail[i]->id;
                rectangleforbiddenzonesetingdetail[i]->data.data = properties->rectangleforbiddenzonesetingdetail[i]->data.data;
                rectangleforbiddenzonesetingdetail[i]->data.len = properties->rectangleforbiddenzonesetingdetail[i]->data.len;
            }
        }
        if (properties->n_roomcleanseting) {
            roomcleanseting = calloc(properties->n_roomcleanseting, sizeof(ArrayNode *));
            if (NULL == roomcleanseting) {
                ret = ENOMEM;
                goto out;
            }
            for (int i = 0; i < properties->n_roomcleanseting; i++) {
                roomcleanseting[i] = malloc(sizeof(ArrayNode));
                if (NULL == roomcleanseting[i]) {
                    ret = ENOMEM;
                    goto out;
                }
                array_node__init(roomcleanseting[i]);
                roomcleanseting[i]->id = properties->roomcleanseting[i]->id;
                roomcleanseting[i]->data.data = properties->roomcleanseting[i]->data.data;
                roomcleanseting[i]->data.len = properties->roomcleanseting[i]->data.len;
            }
        }
        if (properties->designatedpointcleansetingdetail) {
            designatedpointcleansetingdetail = malloc(sizeof(Iot__Service__RobotCleaner__DesignatedPointCleanSetingDetail));
            if (NULL == designatedpointcleansetingdetail) {
                ret = ENOMEM;
                goto out;
            }
            iot__service__robot_cleaner__designated_point_clean_seting_detail__init(designatedpointcleansetingdetail);
            designatedpointcleansetingdetail->x = properties->designatedpointcleansetingdetail->x;
            designatedpointcleansetingdetail->y = properties->designatedpointcleansetingdetail->y;
        }
        props->power = properties->power;
        props->operationmode = properties->operationmode;
        props->robotjobstatus = properties->robotjobstatus;
        props->robotcleanmode = properties->robotcleanmode;
        props->robotsuctionlevel = properties->robotsuctionlevel;
        props->soundvolume = properties->soundvolume;
        props->operationtime = properties->operationtime;
        props->remaintime = properties->remaintime;
        props->cleanarea = properties->cleanarea;
        props->processingpercentage = properties->processingpercentage;
        props->totalcleantime = properties->totalcleantime;
        props->totalcleanarea = properties->totalcleanarea;
        props->totalcycle = properties->totalcycle;
        props->sidebrushlefttime = properties->sidebrushlefttime;
        props->sidebrushlifetime = properties->sidebrushlifetime;
        props->rollbrushlefttime = properties->rollbrushlefttime;
        props->rollbrushlifetime = properties->rollbrushlifetime;
        props->hepalefttime = properties->hepalefttime;
        props->hepalifetime = properties->hepalifetime;
        props->filterlefttime = properties->filterlefttime;
        props->filterlifttime = properties->filterlifttime;
        props->nodisturbingperiod = nodisturbingperiod;
        props->robotsupplywaterrate = properties->robotsupplywaterrate;
        props->carpetincreasessuction = properties->carpetincreasessuction;
        props->n_rectanglecleanzonesetingdetail = properties->n_rectanglecleanzonesetingdetail;
        props->rectanglecleanzonesetingdetail = rectanglecleanzonesetingdetail;
        props->n_rectangleforbiddenzonesetingdetail = properties->n_rectangleforbiddenzonesetingdetail;
        props->rectangleforbiddenzonesetingdetail = rectangleforbiddenzonesetingdetail;
        props->n_roomcleanseting = properties->n_roomcleanseting;
        props->roomcleanseting = roomcleanseting;
        props->currentmapid = properties->currentmapid;
        props->designatedpointcleansetingdetail = designatedpointcleansetingdetail;
        props->breakpointresumeenabled = properties->breakpointresumeenabled;
    }

    ret = robot_cleaner_service_register(props);

out:
    free(props);
    free(nodisturbingperiod);
    if (rectanglecleanzonesetingdetail) {
        for (int i = 0; i < properties->n_rectanglecleanzonesetingdetail; i++) {
            free(rectanglecleanzonesetingdetail[i]);
        }
        free(rectanglecleanzonesetingdetail);
    }
    if (rectangleforbiddenzonesetingdetail) {
        for (int i = 0; i < properties->n_rectangleforbiddenzonesetingdetail; i++) {
            free(rectangleforbiddenzonesetingdetail[i]);
        }
        free(rectangleforbiddenzonesetingdetail);
    }
    if (roomcleanseting) {
        for (int i = 0; i < properties->n_roomcleanseting; i++) {
            free(roomcleanseting[i]);
        }
        free(roomcleanseting);
    }
    free(designatedpointcleansetingdetail);
    return ret;
}

/**
 * @brief side brush replacement notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_side_brush_replacement_notify(struct robot_cleaner_event_side_brush_replacement *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_SIDE_BRUSH_REPLACEMENT,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_side_brush_replacement_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief roll brush replacement notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_roll_brush_replacement_notify(struct robot_cleaner_event_roll_brush_replacement *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_ROLL_BRUSH_REPLACEMENT,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_roll_brush_replacement_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief hepa replacement notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_hepa_replacement_notify(struct robot_cleaner_event_hepa_replacement *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_HEPA_REPLACEMENT,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_hepa_replacement_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief filter replacement notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_filter_replacement_notify(struct robot_cleaner_event_filter_replacement *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_FILTER_REPLACEMENT,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_filter_replacement_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief dust box full notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_dust_box_full_notify(struct robot_cleaner_event_dust_box_full *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_DUST_BOX_FULL,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_dust_box_full_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief overload protection notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_overload_protection_notify(struct robot_cleaner_event_overload_protection *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_OVERLOAD_PROTECTION,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_overload_protection_notify_result_cb, attr->ctx);

    return ret;
}

/**
 * @brief start regular cleaning notify of robot cleaner service
 * @param event    [event content]
 * @param attr     [event details]
 * @return int64_t [event uuid, get error code from errno when return negative value]
*/
int64_t robot_cleaner_start_regular_cleaning_notify(struct robot_cleaner_event_start_regular_cleaning *event, struct hey_event_notify_attr *attr)
{
    int64_t ret = -1;

    struct hey_event_notify_content content = {
        .iid = ROBOT_CLEANER_EVENT_START_REGULAR_CLEANING,
        .importance = attr->importance,
        .uuid = attr->uuid,
        .ref_uuid = attr->ref_uuid,
        .timestamp = attr->timestamp,
        .len = 0,
        .value = NULL,
    };
    ret = hey_event_notify(robot_cleaner_service, &content, robot_cleaner_start_regular_cleaning_notify_result_cb, attr->ctx);

    return ret;
}
